<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sun position: sky.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sun position
   &#160;<span id="projectnumber">0.1.5-1</span>
   </div>
   <div id="projectbrief">Sun position algorithm</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('sky_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sky.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="sky_8h.html" title="sky.h - structures and routines for astronomical observing &amp; tracking">sky.h</a> - structures and routines for astronomical observing &amp; tracking  
<a href="#details">More...</a></p>

<p><a href="sky_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_sky___true_equatorial.html">Sky_TrueEquatorial</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct used for holding an object's coordinates in equatorial apparent or Intermediate coordinates.  <a href="struct_sky___true_equatorial.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_sky___site_horizon.html">Sky_SiteHorizon</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coordinates of a celestial object in the horizon frame, in both rectangular and polar forms.  <a href="struct_sky___site_horizon.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This structure contains relatively constant data, and is set up by one of the three functions <a class="el" href="sky_8h.html#abf770ba7cb996e73f59f41f24b172e3a" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTime()</a>, <a class="el" href="sky_8h.html#a15ad9a782e54212cb22bd0658b6541a0" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeSimple()</a> or <a class="el" href="sky_8h.html#a4295dc6df66f02c4def3160782a06902" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeDetailed()</a>.  <a href="struct_sky___delta_ts.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_sky___times.html">Sky_Times</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This structure contains the continuously varying time (and earth rotation) data, in various forms that we will find useful.  <a href="struct_sky___times.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_sky___polar_mot.html">Sky_PolarMot</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This structure contains polar motion parameters and a rotation matrix.  <a href="struct_sky___polar_mot.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Site properties.  <a href="struct_sky___site_prop.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abf770ba7cb996e73f59f41f24b172e3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#abf770ba7cb996e73f59f41f24b172e3a">sky_initTime</a> (int deltaAT_s, double deltaUT_s, <a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a> *d)</td></tr>
<tr class="memdesc:abf770ba7cb996e73f59f41f24b172e3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is one of three alternative routines for setting up the various delta time values for use in ongoing calculations.  <a href="sky_8h.html#abf770ba7cb996e73f59f41f24b172e3a">More...</a><br /></td></tr>
<tr class="separator:abf770ba7cb996e73f59f41f24b172e3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15ad9a782e54212cb22bd0658b6541a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a15ad9a782e54212cb22bd0658b6541a0">sky_initTimeSimple</a> (<a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a> *d)</td></tr>
<tr class="memdesc:a15ad9a782e54212cb22bd0658b6541a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is one of three alternative routines for setting up the various delta time values for use in ongoing calculations.  <a href="sky_8h.html#a15ad9a782e54212cb22bd0658b6541a0">More...</a><br /></td></tr>
<tr class="separator:a15ad9a782e54212cb22bd0658b6541a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4295dc6df66f02c4def3160782a06902"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a4295dc6df66f02c4def3160782a06902">sky_initTimeDetailed</a> (double mjdUtc, double usnoMjdBase, double usnoCoeffC11, double usnoCoeffC12, int deltaAT_s, <a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a> *d)</td></tr>
<tr class="memdesc:a4295dc6df66f02c4def3160782a06902"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is one of three alternative routines for setting up the various delta time values for use in ongoing calculations.  <a href="sky_8h.html#a4295dc6df66f02c4def3160782a06902">More...</a><br /></td></tr>
<tr class="separator:a4295dc6df66f02c4def3160782a06902"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ea25f7ed8d0a77b756ec42e628fd4ee"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a9ea25f7ed8d0a77b756ec42e628fd4ee">sky_calTimeToJ2kd</a> (int year, int month, int day, int hour, int minute, double second, double tz_h)</td></tr>
<tr class="memdesc:a9ea25f7ed8d0a77b756ec42e628fd4ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of days (and fraction of a day) since noon 2000 Jan 1 (UTC) of the given calendar date and time.  <a href="sky_8h.html#a9ea25f7ed8d0a77b756ec42e628fd4ee">More...</a><br /></td></tr>
<tr class="separator:a9ea25f7ed8d0a77b756ec42e628fd4ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aee1eec802ff35faf9ac14a73c8d129"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a1aee1eec802ff35faf9ac14a73c8d129">sky_unixTimeToJ2kd</a> (time_t unixTime)</td></tr>
<tr class="memdesc:a1aee1eec802ff35faf9ac14a73c8d129"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a time in Unix system time format to days since 2000 Jan 1, noon UTC.  <a href="sky_8h.html#a1aee1eec802ff35faf9ac14a73c8d129">More...</a><br /></td></tr>
<tr class="separator:a1aee1eec802ff35faf9ac14a73c8d129"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7513b8f36999901f10d8d430695b327"><td class="memItemLeft" align="right" valign="top"><a id="af7513b8f36999901f10d8d430695b327"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>sky_unixTimespecToJ2kd</b> (struct timespec uTs)</td></tr>
<tr class="separator:af7513b8f36999901f10d8d430695b327"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a348fbf0f078de1a802c81696f999913e"><td class="memItemLeft" align="right" valign="top"><a id="a348fbf0f078de1a802c81696f999913e"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>sky_calTimeToMjd</b> (int year, int month, int day, int hour, int minute, double second, double tz_h)</td></tr>
<tr class="separator:a348fbf0f078de1a802c81696f999913e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa664359d011dbdd0d9b14d2445691cc2"><td class="memItemLeft" align="right" valign="top"><a id="aa664359d011dbdd0d9b14d2445691cc2"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>sky_unixTimeToMjd</b> (time_t unixTime)</td></tr>
<tr class="separator:aa664359d011dbdd0d9b14d2445691cc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46ca04bd5f015731b0623f8d0d709b3c"><td class="memItemLeft" align="right" valign="top"><a id="a46ca04bd5f015731b0623f8d0d709b3c"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>sky_unixTimespecToMjd</b> (struct timespec uTs)</td></tr>
<tr class="separator:a46ca04bd5f015731b0623f8d0d709b3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03279243991e42a3edbeaac243ae2dc7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a03279243991e42a3edbeaac243ae2dc7">sky_updateTimes</a> (double j2kUtc_d, const <a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a> *d, <a class="el" href="struct_sky___times.html">Sky_Times</a> *t)</td></tr>
<tr class="memdesc:a03279243991e42a3edbeaac243ae2dc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the given "J2KD" in the UTC timescale to the other timescales, and pre-calculate some other quantities.  <a href="sky_8h.html#a03279243991e42a3edbeaac243ae2dc7">More...</a><br /></td></tr>
<tr class="separator:a03279243991e42a3edbeaac243ae2dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab82a5143e19d23c65cb76a17c47a2478"><td class="memItemLeft" align="right" valign="top"><a id="ab82a5143e19d23c65cb76a17c47a2478"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>sky_updateTimesFromMjd</b> (double mjdUtc, const <a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a> *d, <a class="el" href="struct_sky___times.html">Sky_Times</a> *t)</td></tr>
<tr class="separator:ab82a5143e19d23c65cb76a17c47a2478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a670f5ac7522664ecdfc25c88d6cde7cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a670f5ac7522664ecdfc25c88d6cde7cf">sky_setPolarMotion</a> (double xPolar_as, double yPolar_as, double t_cy, <a class="el" href="struct_sky___polar_mot.html">Sky_PolarMot</a> *polar)</td></tr>
<tr class="memdesc:a670f5ac7522664ecdfc25c88d6cde7cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update polar motion correction.  <a href="sky_8h.html#a670f5ac7522664ecdfc25c88d6cde7cf">More...</a><br /></td></tr>
<tr class="separator:a670f5ac7522664ecdfc25c88d6cde7cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6afa64839aaee5925d90c013e8eaa0b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a6afa64839aaee5925d90c013e8eaa0b2">sky_j2kdToCalTime</a> (double j2k_d, int *year, int *month, int *day, int *hour, int *minute, double *second)</td></tr>
<tr class="memdesc:a6afa64839aaee5925d90c013e8eaa0b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This procedure converts the integral part of the date in "J2KD" form to a calendar date and the fractional part to hours, minutes and seconds.  <a href="sky_8h.html#a6afa64839aaee5925d90c013e8eaa0b2">More...</a><br /></td></tr>
<tr class="separator:a6afa64839aaee5925d90c013e8eaa0b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62a568c27e3316327c5e2e48b68800ba"><td class="memItemLeft" align="right" valign="top"><a id="a62a568c27e3316327c5e2e48b68800ba"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>sky_mjdToCalTime</b> (double mjd, int *year, int *month, int *day, int *hour, int *minute, double *second)</td></tr>
<tr class="separator:a62a568c27e3316327c5e2e48b68800ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a185862b772bcb6ef6eebf5cb33de09a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a185862b772bcb6ef6eebf5cb33de09a6">sky_setSiteLocation</a> (double latitude_deg, double longitude_deg, double height_m, <a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *site)</td></tr>
<tr class="memdesc:a185862b772bcb6ef6eebf5cb33de09a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the <em>site</em> structure by calculating those site-related values that do not change with time.  <a href="sky_8h.html#a185862b772bcb6ef6eebf5cb33de09a6">More...</a><br /></td></tr>
<tr class="separator:a185862b772bcb6ef6eebf5cb33de09a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a031a736d11ac57f7bf73cb8f68bb5aec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a031a736d11ac57f7bf73cb8f68bb5aec">sky_setSiteLoc2</a> (double astLat_deg, double astLong_deg, double geodLat_deg, double geodLong_deg, double height_m, <a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *site)</td></tr>
<tr class="memdesc:a031a736d11ac57f7bf73cb8f68bb5aec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alternative initialisation function to <a class="el" href="sky_8h.html#a185862b772bcb6ef6eebf5cb33de09a6" title="Initialise the site structure by calculating those site-related values that do not change with time.">sky_setSiteLocation()</a>.  <a href="sky_8h.html#a031a736d11ac57f7bf73cb8f68bb5aec">More...</a><br /></td></tr>
<tr class="separator:a031a736d11ac57f7bf73cb8f68bb5aec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29b6ad0e946c885c8a170bfdaa922ece"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a29b6ad0e946c885c8a170bfdaa922ece">sky_setSiteTempPress</a> (double temperature_degC, double pressure_hPa, <a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *site)</td></tr>
<tr class="memdesc:a29b6ad0e946c885c8a170bfdaa922ece"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set refraction coefficients based on atmospheric temperature and pressure at the site.  <a href="sky_8h.html#a29b6ad0e946c885c8a170bfdaa922ece">More...</a><br /></td></tr>
<tr class="separator:a29b6ad0e946c885c8a170bfdaa922ece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a982a0d853512a67d9e2177845e605dc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a982a0d853512a67d9e2177845e605dc4">sky_setSiteTimeZone</a> (double timeZone_h, <a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *site)</td></tr>
<tr class="memdesc:a982a0d853512a67d9e2177845e605dc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the time zone offset for this site.  <a href="sky_8h.html#a982a0d853512a67d9e2177845e605dc4">More...</a><br /></td></tr>
<tr class="separator:a982a0d853512a67d9e2177845e605dc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9df313095294ca3e1fd6bfa9f53065b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a9df313095294ca3e1fd6bfa9f53065b8">sky_setupSiteSurface</a> (double azimuth_deg, double slope_deg, <a class="el" href="struct_sky___site_horizon.html">Sky_SiteHorizon</a> *surface)</td></tr>
<tr class="memdesc:a9df313095294ca3e1fd6bfa9f53065b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the orientation and slope of a surface (such as a solar panel) for which you want to calculate the incidence angle of incoming radiation.  <a href="sky_8h.html#a9df313095294ca3e1fd6bfa9f53065b8">More...</a><br /></td></tr>
<tr class="separator:a9df313095294ca3e1fd6bfa9f53065b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a297ba340f931e59201a108c6a9e67800"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a297ba340f931e59201a108c6a9e67800">sky_adjustSiteForPolarMotion</a> (const <a class="el" href="struct_sky___polar_mot.html">Sky_PolarMot</a> *polar, <a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *site)</td></tr>
<tr class="memdesc:a297ba340f931e59201a108c6a9e67800"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modify our azEl rotation matrix to incorporate a polar motion rotation matrix.  <a href="sky_8h.html#a297ba340f931e59201a108c6a9e67800">More...</a><br /></td></tr>
<tr class="separator:a297ba340f931e59201a108c6a9e67800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0797b1e268ac7cc5b052c0623883eb74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a0797b1e268ac7cc5b052c0623883eb74">sky_siteTirsToTopo</a> (const <a class="el" href="struct_v3_d___vector.html">V3D_Vector</a> *terInterV, double dist_au, const <a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *site, <a class="el" href="struct_sky___site_horizon.html">Sky_SiteHorizon</a> *topo)</td></tr>
<tr class="memdesc:a0797b1e268ac7cc5b052c0623883eb74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transform a coordinate vector from the Terrestrial Intermediate Reference System to topocentric Az/El coordinates for the observing site whose properties are described in parameter "site".  <a href="sky_8h.html#a0797b1e268ac7cc5b052c0623883eb74">More...</a><br /></td></tr>
<tr class="separator:a0797b1e268ac7cc5b052c0623883eb74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05846caf4fbc0dfe00c77cdb1faf6079"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#a05846caf4fbc0dfe00c77cdb1faf6079">sky_siteAzElToHaDec</a> (const <a class="el" href="struct_v3_d___vector.html">V3D_Vector</a> *topoV, const <a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *site, double *hourAngle_rad, double *declination_rad)</td></tr>
<tr class="memdesc:a05846caf4fbc0dfe00c77cdb1faf6079"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take a topocentric position vector in Azimuth/Elevation frame and use it to calculate the observed Hour Angle and Declination.  <a href="sky_8h.html#a05846caf4fbc0dfe00c77cdb1faf6079">More...</a><br /></td></tr>
<tr class="separator:a05846caf4fbc0dfe00c77cdb1faf6079"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa393888d1c0cb90591bba47452d99db4"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sky_8h.html#aa393888d1c0cb90591bba47452d99db4">sky_siteIncidence_rad</a> (const <a class="el" href="struct_v3_d___vector.html">V3D_Vector</a> *topoV, const <a class="el" href="struct_v3_d___vector.html">V3D_Vector</a> *surfaceV)</td></tr>
<tr class="memdesc:aa393888d1c0cb90591bba47452d99db4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the incidence angle of rays from the celestial object described by <em>topoV</em> (such as the sun) falling onto a surface described by <em>surfaceV</em> (such as a solar panel).  <a href="sky_8h.html#aa393888d1c0cb90591bba47452d99db4">More...</a><br /></td></tr>
<tr class="separator:aa393888d1c0cb90591bba47452d99db4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="sky_8h.html" title="sky.h - structures and routines for astronomical observing &amp; tracking">sky.h</a> - structures and routines for astronomical observing &amp; tracking </p>
<p><br  />
 </p><dl class="section author"><dt>Author</dt><dd>David Hoadley</dd></dl>
<p>This collection is in two parts:</p><ul>
<li>time routines. Routines for handling the different timescales used in astronomy, and for calculating the rotational orientation of the Earth. The timescales involved are TT, UT1 and UTC (see <a class="el" href="page-timescales.html">Timescales, and converting between them</a>). Also included here is a routine to set polar motion parameters.</li>
<li>site routines. Data that is specific to an observing site on the Earth, and routines to convert astronomical coordinates to site-specific (i.e. topocentric) coordinates at the site. More than one site may be supported simultaneously, if required.</li>
</ul>
<p>The routines are designed to provide an efficient implementation of the necessary calculations. When combined with the routines in the <a class="el" href="skyfast_8h.html" title="skyfast.h - set up and use interpolation for rapid calculation of a celestial object&#39;s apparent coord...">skyfast.h</a> and <a class="el" href="skyfast_8c_source.html">skyfast.c</a> module, they enable accurate tracking with even a small processor.</p>
<p>Other modules required:</p><ul>
<li><a class="el" href="sun_8h.html" title="sun.h - routines to calculate the Sun&#39;s position">sun.h</a> (and <a class="el" href="sun_8c_source.html">sun.c</a>) if you want to track the Sun, using either the NREL Solar Position Algorithm, or a simplified approximate one.</li>
<li><a class="el" href="moon_8h.html" title="moon.h - routines to calculate the Moon&#39;s position">moon.h</a> (and <a class="el" href="moon_8c_source.html">moon.c</a>) if you want to track the Moon, using the NREL Moon Position Algorithm</li>
<li>(future) a module for tracking other planets</li>
<li>(future) a module for tracking stars</li>
<li><a class="el" href="skyio_8h.html" title="skyio.h - output and formatting routines and a read routine">skyio.h</a> (and <a class="el" href="skyio_8c_source.html">skyio.c</a>) for input-output routines: conversions of angles to and from strings in sexagesimal (e.g. degrees, minutes and seconds) form; writing out a day number as a date &amp; time.</li>
<li><a class="el" href="vectors3d_8h.html" title="vectors3d.h - Three dimensional geometry, vectors and matrices">vectors3d.h</a> (and <a class="el" href="vectors3d_8c_source.html">vectors3d.c</a>) which implements the rectangular matrix and vector operations used by these algorithms,</li>
</ul>
<p>You will need to separately include one of the following modules:</p><ul>
<li><a class="el" href="sky0_8h.html" title="sky0.h - astronomical coordinate conversion for NREL Sun Position Algorithm">sky0.h</a> (and <a class="el" href="sky0_8c_source.html">sky0.c</a>) for nutation routines and sidereal time routines suitable for tracking the Sun or the Moon using the NREL Solar Position Algorithm and Moon Position Algorithm</li>
<li>(future) <a class="el" href="sky1_8h.html" title="sky1.h - astronomical coordinate conversion routines, IAU 1980">sky1.h</a> (and <a class="el" href="sky1_8c_source.html">sky1.c</a>) for IAU 1980 precession, nutation and sidereal time routines, suitable for tracking stars</li>
<li>(future) sky2.h (and sky2.c) for IAU 2000 precession, nutation and sidereal time routines, suitable for tracking stars</li>
</ul>
<hr  />
 
<p class="definition">Definition in file <a class="el" href="sky_8h_source.html">sky.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="abf770ba7cb996e73f59f41f24b172e3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf770ba7cb996e73f59f41f24b172e3a">&#9670;&nbsp;</a></span>sky_initTime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_initTime </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deltaAT_s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>deltaUT_s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a> *&#160;</td>
          <td class="paramname"><em>d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is one of three alternative routines for setting up the various delta time values for use in ongoing calculations. </p>
<p>(The other two are <a class="el" href="sky_8h.html#a4295dc6df66f02c4def3160782a06902" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeDetailed()</a> and <a class="el" href="sky_8h.html#a15ad9a782e54212cb22bd0658b6541a0" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeSimple()</a>). For an explanation of these delta times, see <a class="el" href="page-timescales.html">Timescales, and converting between them</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">deltaAT_s</td><td>(= TAI - UTC). Cumulative number of leap seconds (seconds) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">deltaUT_s</td><td>(= UT1 - UTC) (seconds). Valid range [-0.9,+0.9] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">d</td><td>Fields initialised as follows:<ul>
<li><em>d-&gt;deltaUT_d</em> initialised to <em>deltaUT_s</em> / 86400</li>
<li><em>d-&gt;deltaT_d</em> initialised to (<em>deltaAT_s</em> + 32.184 - <em>deltaUT_s</em>) / 86400</li>
<li><em>d-&gt;deltaTT_d</em> initialised to (<em>deltaAT_s</em> + 32.184) / 86400</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>When to call this function</dt><dd>Call at program startup time. Use this routine if you have opted for option 3A, 3B or 3D in the note at the bottom of this file (see <a class="el" href="page-timescales.html">Timescales, and converting between them</a>). (Use <a class="el" href="sky_8h.html#a4295dc6df66f02c4def3160782a06902" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeDetailed()</a> if you have opted for option 3C.)</dd></dl>
<hr  />
 <dl class="section examples"><dt>Examples</dt><dd><a class="el" href="demo1_sun_8c-example.html#a4">demo1_sun.c</a>, <a class="el" href="demo2_sun_tracking_8c-example.html#a4">demo2_sun_tracking.c</a>, and <a class="el" href="demo3_moon_8c-example.html#a3">demo3_moon.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sky-time_8c_source.html#l00096">96</a> of file <a class="el" href="sky-time_8c_source.html">sky-time.c</a>.</p>

</div>
</div>
<a id="a15ad9a782e54212cb22bd0658b6541a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15ad9a782e54212cb22bd0658b6541a0">&#9670;&nbsp;</a></span>sky_initTimeSimple()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_initTimeSimple </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a> *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is one of three alternative routines for setting up the various delta time values for use in ongoing calculations. </p>
<p>(The other two are <a class="el" href="sky_8h.html#abf770ba7cb996e73f59f41f24b172e3a" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTime()</a> and <a class="el" href="sky_8h.html#a4295dc6df66f02c4def3160782a06902" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeDetailed()</a>). This function initialises the delta times with simnple default values. For an explanation of these delta times, see <a class="el" href="page-timescales.html">Timescales, and converting between them</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">d</td><td>Fields initialised as follows:<ul>
<li><em>d-&gt;deltaUT_d</em> initialised to 0.0</li>
<li><em>d-&gt;deltaT_d</em> initialised to (37 + 32.184) / 86400</li>
<li><em>d-&gt;deltaTT_d</em> initialised to (37 + 32.184) / 86400</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>When to call this function</dt><dd>Call this function at program startup time. Use this routine if you don't need the high accuracy of sub-second time. But if you do need it, call <a class="el" href="sky_8h.html#abf770ba7cb996e73f59f41f24b172e3a" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTime()</a> or <a class="el" href="sky_8h.html#a4295dc6df66f02c4def3160782a06902" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeDetailed()</a> instead.</dd></dl>
<hr  />
 
<p class="definition">Definition at line <a class="el" href="sky-time_8c_source.html#l00181">181</a> of file <a class="el" href="sky-time_8c_source.html">sky-time.c</a>.</p>

</div>
</div>
<a id="a4295dc6df66f02c4def3160782a06902"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4295dc6df66f02c4def3160782a06902">&#9670;&nbsp;</a></span>sky_initTimeDetailed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_initTimeDetailed </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mjdUtc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>usnoMjdBase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>usnoCoeffC11</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>usnoCoeffC12</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deltaAT_s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a> *&#160;</td>
          <td class="paramname"><em>d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is one of three alternative routines for setting up the various delta time values for use in ongoing calculations. </p>
<p>(The other two are <a class="el" href="sky_8h.html#abf770ba7cb996e73f59f41f24b172e3a" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTime()</a> and <a class="el" href="sky_8h.html#a15ad9a782e54212cb22bd0658b6541a0" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeSimple()</a>). This routine uses a prediction formula to calculate the value of delta_UT, rather than having it specified directly. For an explanation of these delta times, see <a class="el" href="page-timescales.html">Timescales, and converting between them</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mjdUtc</td><td>Modified Julian Date (= JD - 2 400 000.5), UTC timescale </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">usnoMjdBase,usnoCoeffC11,usnoCoeffC12</td><td>US Naval Observatory prediction formula values. These three values are obtained from "Bulletin A" of the International Earth Rotation Service (IERS), updated at the IERS (&amp; USNO) website from time to time (see <a class="el" href="page-timescales.html">Timescales, and converting between them</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">deltaAT_s</td><td>(= TAI - UTC). Cumulative number of leap seconds (seconds) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">d</td><td>Fields initialised as follows:<ul>
<li><em>d-&gt;deltaUT_d</em> initialised using USNO prediction formula</li>
<li><em>d-&gt;deltaT_d</em> initialised to (<em>deltaAT_s</em> + 32.184) / 86400 - <em>d-&gt;deltaUT_d</em> </li>
<li><em>d-&gt;deltaTT_d</em> initialised to (<em>deltaAT_s</em> + 32.184) / 86400</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>When to call this function</dt><dd>Call this function at program startup time. Use this routine if you have opted for option 3C in the note at the bottom of this file (see <a class="el" href="page-timescales.html">Timescales, and converting between them</a>). (Use <a class="el" href="sky_8h.html#abf770ba7cb996e73f59f41f24b172e3a" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTime()</a> instead, if you have opted for option 3A, 3B or 3D.) If your program runs uninterrupted for many days, you may wish to call this function once per day with an updated value for <em>mjdUtc</em>.</dd></dl>
<hr  />
 <dl class="section examples"><dt>Examples</dt><dd><a class="el" href="demo4_multiple_sites_8c-example.html#a7">demo4_multiple_sites.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sky-time_8c_source.html#l00134">134</a> of file <a class="el" href="sky-time_8c_source.html">sky-time.c</a>.</p>

</div>
</div>
<a id="a9ea25f7ed8d0a77b756ec42e628fd4ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ea25f7ed8d0a77b756ec42e628fd4ee">&#9670;&nbsp;</a></span>sky_calTimeToJ2kd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sky_calTimeToJ2kd </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>year</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>month</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>day</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hour</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minute</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>second</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>tz_h</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the number of days (and fraction of a day) since noon 2000 Jan 1 (UTC) of the given calendar date and time. </p>
<p>This is one of three alternative routines that return a J2KD - the other two are <a class="el" href="sky_8h.html#a1aee1eec802ff35faf9ac14a73c8d129" title="Convert a time in Unix system time format to days since 2000 Jan 1, noon UTC.">sky_unixTimeToJ2kd()</a> and sky_unixTimespecToJ2kd(). </p><dl class="section return"><dt>Returns</dt><dd>days since Julian date 2 451 545.0, UTC timescale </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">year,month,day</td><td>calendar date </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hour</td><td>valid range [0, 23] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">minute</td><td>valid range [0, 59] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">second</td><td>valid range [0.0, 60.0) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tz_h</td><td>time zone offset (hours), positive for zones east of Greenwich (e.g. Australian time zones AEST = +10.0, ACST = +9.5, AEDT = +11.0; UTC = 0.0; USA time zones are negative) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>When to call this routine</dt><dd>Call this (or one of the alternative routines) before each call to <a class="el" href="sky_8h.html#a03279243991e42a3edbeaac243ae2dc7" title="Convert the given &quot;J2KD&quot; in the UTC timescale to the other timescales, and pre-calculate some other q...">sky_updateTimes()</a>.</dd></dl>
<hr  />
 
<p class="definition">Definition at line <a class="el" href="sky-time_8c_source.html#l00241">241</a> of file <a class="el" href="sky-time_8c_source.html">sky-time.c</a>.</p>

</div>
</div>
<a id="a1aee1eec802ff35faf9ac14a73c8d129"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aee1eec802ff35faf9ac14a73c8d129">&#9670;&nbsp;</a></span>sky_unixTimeToJ2kd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sky_unixTimeToJ2kd </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>unixTime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a time in Unix system time format to days since 2000 Jan 1, noon UTC. </p>
<p>This is one of three alternative routines that return a J2KD - the other two are <a class="el" href="sky_8h.html#a9ea25f7ed8d0a77b756ec42e628fd4ee" title="Return the number of days (and fraction of a day) since noon 2000 Jan 1 (UTC) of the given calendar d...">sky_calTimeToJ2kd()</a> and sky_unixTimespecToJ2kd(). </p><dl class="section return"><dt>Returns</dt><dd>days since Julian Date 2 451 545.0, UTC timescale </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unixTime</td><td>- time in C standard <code>time_t</code> (or unix) format ((sort of) seconds since 1-Jan-1970 UTC)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This routine has no better resolution than one second. Use routine sky_unixTimespecToMjd() or sky_calTimeToMjd() instead, if you need sub-second resolution. </dd></dl>
<dl class="section user"><dt>When to call this routine</dt><dd>Call this (or one of the alternative routines) before each call to <a class="el" href="sky_8h.html#a03279243991e42a3edbeaac243ae2dc7" title="Convert the given &quot;J2KD&quot; in the UTC timescale to the other timescales, and pre-calculate some other q...">sky_updateTimes()</a>.</dd></dl>
<hr  />
 <dl class="section examples"><dt>Examples</dt><dd><a class="el" href="demo1_sun_8c-example.html#a14">demo1_sun.c</a>, <a class="el" href="demo2_sun_tracking_8c-example.html#a14">demo2_sun_tracking.c</a>, <a class="el" href="demo3_moon_8c-example.html#a13">demo3_moon.c</a>, and <a class="el" href="demo4_multiple_sites_8c-example.html#a6">demo4_multiple_sites.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sky-time_8c_source.html#l00275">275</a> of file <a class="el" href="sky-time_8c_source.html">sky-time.c</a>.</p>

</div>
</div>
<a id="a03279243991e42a3edbeaac243ae2dc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03279243991e42a3edbeaac243ae2dc7">&#9670;&nbsp;</a></span>sky_updateTimes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_updateTimes </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>j2kUtc_d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___times.html">Sky_Times</a> *&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the given "J2KD" in the UTC timescale to the other timescales, and pre-calculate some other quantities. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">j2kUtc_d</td><td>Date in "J2KD" form - i.e. the number of days elapsed since 2000 Jan 1.5 (= JD - 2 451 545.0), UTC timescale, as returned by <a class="el" href="sky_8h.html#a9ea25f7ed8d0a77b756ec42e628fd4ee" title="Return the number of days (and fraction of a day) since noon 2000 Jan 1 (UTC) of the given calendar d...">sky_calTimeToJ2kd()</a>, <a class="el" href="sky_8h.html#a1aee1eec802ff35faf9ac14a73c8d129" title="Convert a time in Unix system time format to days since 2000 Jan 1, noon UTC.">sky_unixTimeToJ2kd()</a> or sky_unixTimespecToJ2kd(). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d</td><td>The various delta T values as set by one of <a class="el" href="sky_8h.html#abf770ba7cb996e73f59f41f24b172e3a" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTime()</a>, <a class="el" href="sky_8h.html#a4295dc6df66f02c4def3160782a06902" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeDetailed()</a> or <a class="el" href="sky_8h.html#a15ad9a782e54212cb22bd0658b6541a0" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeSimple()</a> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">t</td><td>All fields are updated</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Reference</dt><dd><em>Astronomical Almanac</em> 2007, page B9 (for Earth Rotation Angle)</dd></dl>
<dl class="section user"><dt>When to call this function</dt><dd>Call this routine before calling any routine that calculates a celestial position.</dd></dl>
<hr  />
 <dl class="section examples"><dt>Examples</dt><dd><a class="el" href="demo4_multiple_sites_8c-example.html#a13">demo4_multiple_sites.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sky-time_8c_source.html#l00206">206</a> of file <a class="el" href="sky-time_8c_source.html">sky-time.c</a>.</p>

</div>
</div>
<a id="a670f5ac7522664ecdfc25c88d6cde7cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a670f5ac7522664ecdfc25c88d6cde7cf">&#9670;&nbsp;</a></span>sky_setPolarMotion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_setPolarMotion </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>xPolar_as</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>yPolar_as</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>t_cy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___polar_mot.html">Sky_PolarMot</a> *&#160;</td>
          <td class="paramname"><em>polar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update polar motion correction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">xPolar_as</td><td>Polar motion in x (arcseconds) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">yPolar_as</td><td>Polar motion in y (arcseconds) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">t_cy</td><td>Julian centuries since J2000.0, TT timescale </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">polar</td><td>Polar motion params and rotation matrix, calculated from R1(-y) * R2(-x) * R3(s')</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Reference</dt><dd><em>Astronomical Almanac</em> 2007, page B80</dd></dl>
<dl class="section user"><dt>When to call this function</dt><dd>This routine needs to be called only when polar motion parameters change - which is no more frequently than once per day. This effect is so small that it can be ignored altogether with only a tiny loss of accuracy.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Every time this routine is called, the routine <a class="el" href="sky_8h.html#a297ba340f931e59201a108c6a9e67800" title="Modify our azEl rotation matrix to incorporate a polar motion rotation matrix.">sky_adjustSiteForPolarMotion()</a> must be called for every site. (Typically this will be only one site.)</dd></dl>
<hr  />
 
<p class="definition">Definition at line <a class="el" href="sky-time_8c_source.html#l00570">570</a> of file <a class="el" href="sky-time_8c_source.html">sky-time.c</a>.</p>

</div>
</div>
<a id="a6afa64839aaee5925d90c013e8eaa0b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6afa64839aaee5925d90c013e8eaa0b2">&#9670;&nbsp;</a></span>sky_j2kdToCalTime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_j2kdToCalTime </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>j2k_d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>year</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>month</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>day</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>hour</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>minute</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>second</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This procedure converts the integral part of the date in "J2KD" form to a calendar date and the fractional part to hours, minutes and seconds. </p>
<p>If the returned date is from 1582-10-15 or later, it is a Gregorian calendar date. If the returned date is 1582-10-04 or earlier, it is a Julian calendar date. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">j2k_d</td><td>Days since J2000.0 (= Julian Date - 2 451 545.0) Valid range: j2k_d &gt;= -2447065, otherwise incorrect results</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">year,month,day</td><td>calendar date </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">hour,minute,second</td><td>time of day</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Reference</dt><dd>The algorithm is based on a method of D A Hatcher, <em>Quarterly Journal of the Royal Astronomical Society</em> 1984, Vol 25, pp 53-55. It is valid for dates after JD = 4480 (7 April 4701 BC, Julian calendar).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>To obtain calendar date and time for any timezone other than UTC, add the time zone offset (in units of fraction of a day) to <em>mjd</em> before calling this routine. The <em>timezone_d</em> field of the site properties struct (type <a class="el" href="struct_sky___site_prop.html" title="Site properties.">Sky_SiteProp</a>) provides this value. </dd></dl>
<dl class="section user"><dt></dt><dd>If <em>second</em> turns out to be within half a millisecond of the next round minute, this routine rounds time upwards.</dd></dl>
<hr  />
 
<p class="definition">Definition at line <a class="el" href="sky-time_8c_source.html#l00321">321</a> of file <a class="el" href="sky-time_8c_source.html">sky-time.c</a>.</p>

</div>
</div>
<a id="a185862b772bcb6ef6eebf5cb33de09a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a185862b772bcb6ef6eebf5cb33de09a6">&#9670;&nbsp;</a></span>sky_setSiteLocation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_setSiteLocation </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>latitude_deg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>longitude_deg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>height_m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *&#160;</td>
          <td class="paramname"><em>site</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise the <em>site</em> structure by calculating those site-related values that do not change with time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">latitude_deg</td><td>Latitude of site (ϕ) (degrees) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">longitude_deg</td><td>Longitude of site (degrees) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">height_m</td><td>Height above ellipsoid (e.g. GPS height) (metres)</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">site</td><td>All fields initialised</td></tr>
  </table>
  </dd>
</dl>
<p>This is a simplified version of <a class="el" href="sky_8h.html#a031a736d11ac57f7bf73cb8f68bb5aec" title="Alternative initialisation function to sky_setSiteLocation().">sky_setSiteLoc2()</a>, which is good enough for most purposes.</p>
<p>This function calculates the quantities that will be used to convert geocentric coordinates to topocentric ones. This involves calculating the position of the site relative to the centre of the earth, and calculating constants that will be used for diurnal parallax and aberration corrections.</p>
<p>This is complicated by the fact that the earth is elliptical rather than perfectly spherical. See section K of The Astronomical Almanac (pages K11 &amp; K12 in the 2007 edition) for details of the geometry. This function effectively calculates the Geocentric latitude (ϕ′) from the Geodetic latitude (ϕ), and then sin(ϕ - ϕ′) and cos(ϕ - ϕ′). But in practice, the sin and cos terms can be obtained without explicitly calculating ϕ′ itself, and that is done here.</p>
<p>The <em>site-&gt;refracPT</em> field is initialised assuming that the site pressure is 1010 hPa and the temperature is 10 °C. If other values are required, follow this call by a call to <a class="el" href="sky_8h.html#a29b6ad0e946c885c8a170bfdaa922ece" title="Set refraction coefficients based on atmospheric temperature and pressure at the site.">sky_setSiteTempPress()</a>.</p>
<p>The <em>site-&gt;timezone_d</em> field is initialised to 0, assuming that the site time zone is UTC. If another value is required, follow this call by a call to <a class="el" href="sky_8h.html#a982a0d853512a67d9e2177845e605dc4" title="Set the time zone offset for this site.">sky_setSiteTimeZone()</a>.</p>
<dl class="section user"><dt>When to call this function</dt><dd>At program initialisation time only</dd></dl>
<hr  />
 <dl class="section examples"><dt>Examples</dt><dd><a class="el" href="demo1_sun_8c-example.html#a5">demo1_sun.c</a>, <a class="el" href="demo2_sun_tracking_8c-example.html#a5">demo2_sun_tracking.c</a>, <a class="el" href="demo3_moon_8c-example.html#a4">demo3_moon.c</a>, and <a class="el" href="demo4_multiple_sites_8c-example.html#a8">demo4_multiple_sites.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sky-site_8c_source.html#l00105">105</a> of file <a class="el" href="sky-site_8c_source.html">sky-site.c</a>.</p>

</div>
</div>
<a id="a031a736d11ac57f7bf73cb8f68bb5aec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a031a736d11ac57f7bf73cb8f68bb5aec">&#9670;&nbsp;</a></span>sky_setSiteLoc2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_setSiteLoc2 </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>astLat_deg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>astLong_deg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>geodLat_deg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>geodLong_deg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>height_m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *&#160;</td>
          <td class="paramname"><em>site</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alternative initialisation function to <a class="el" href="sky_8h.html#a185862b772bcb6ef6eebf5cb33de09a6" title="Initialise the site structure by calculating those site-related values that do not change with time.">sky_setSiteLocation()</a>. </p>
<p>It initialises the <em>site</em> structure, but it supports a distinction between Astronomical latitude &amp; longitude and Geodetic latitude &amp; longitude. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">astLat_deg</td><td>Astronomical Latitude of site (ϕA) (degrees) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">astLong_deg</td><td>Astronomical Longitude of site (degrees) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">geodLat_deg</td><td>Geodetic Latitude of site (GPS latitude) (ϕ) (degrees) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">geodLong_deg</td><td>Geodetic Longitude of site (GPS longitude) (degrees) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">height_m</td><td>Height above ellipsoid (e.g. GPS height) (metres)</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">site</td><td>All fields initialised</td></tr>
  </table>
  </dd>
</dl>
<p>This function calculates the same quantities as described for <a class="el" href="sky_8h.html#a185862b772bcb6ef6eebf5cb33de09a6" title="Initialise the site structure by calculating those site-related values that do not change with time.">sky_setSiteLocation()</a>. The only difference is that the <em>site.azElBaseM</em> rotation matrix is based on Astronomical latitude and latitude (instead of Geodetic).</p>
<p>Astronomical latitude and longitude are coordinates as determined by the local gravity vector and astronomical observation. Geodetic latitude and longitude are coordinates as measured by some geodetic system - e.g. a map reference, or GPS coordinates.</p>
<dl class="section note"><dt>Note</dt><dd>Distinguishing between Astronomical lat &amp; lon and Geodetic lat &amp; lon is only required for very precise work. It is most likely that you won't actually know the Astronomical coords, and it won't matter. Use function <a class="el" href="sky_8h.html#a185862b772bcb6ef6eebf5cb33de09a6" title="Initialise the site structure by calculating those site-related values that do not change with time.">sky_setSiteLocation()</a> instead - it sets the Astronomical coords to the same values as the Geodetic or GPS coords.</dd></dl>
<p>The <em>site-&gt;refracPT</em> field is initialised assuming that the site pressure is 1010 hPa and the temperature is 10 °C. If other values are required, follow this call by a call to <a class="el" href="sky_8h.html#a29b6ad0e946c885c8a170bfdaa922ece" title="Set refraction coefficients based on atmospheric temperature and pressure at the site.">sky_setSiteTempPress()</a>.</p>
<p>The <em>site-&gt;timezone_d</em> field is initialised to 0, assuming that the site time zone is UTC. If another value is required, follow this call by a call to <a class="el" href="sky_8h.html#a982a0d853512a67d9e2177845e605dc4" title="Set the time zone offset for this site.">sky_setSiteTimeZone()</a>.</p>
<dl class="section user"><dt>When to call this function</dt><dd>At program initialisation time only, if you need to distinguish between Astronomical latitude/longitude and Geodetic latitude/longitude. Otherwise call <a class="el" href="sky_8h.html#a185862b772bcb6ef6eebf5cb33de09a6" title="Initialise the site structure by calculating those site-related values that do not change with time.">sky_setSiteLocation()</a> instead.</dd></dl>
<hr  />
 
<p class="definition">Definition at line <a class="el" href="sky-site_8c_source.html#l00156">156</a> of file <a class="el" href="sky-site_8c_source.html">sky-site.c</a>.</p>

</div>
</div>
<a id="a29b6ad0e946c885c8a170bfdaa922ece"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29b6ad0e946c885c8a170bfdaa922ece">&#9670;&nbsp;</a></span>sky_setSiteTempPress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_setSiteTempPress </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>temperature_degC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>pressure_hPa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *&#160;</td>
          <td class="paramname"><em>site</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set refraction coefficients based on atmospheric temperature and pressure at the site. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">temperature_degC</td><td>- average annual air temperature at the site (°C) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pressure_hPa</td><td>- average annual air pressure at the site (hPa = mbar) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">site</td><td>- field <em>refracPT</em>, a combined refraction coefficient for pressure &amp; temperature</td></tr>
  </table>
  </dd>
</dl>
<p>This coefficient will be used in the simple refraction algorithm that is called from routine <a class="el" href="sky_8h.html#a0797b1e268ac7cc5b052c0623883eb74" title="Transform a coordinate vector from the Terrestrial Intermediate Reference System to topocentric Az/El...">sky_siteTirsToTopo()</a>.</p>
<dl class="section user"><dt>When to call this function</dt><dd><ol type="1">
<li>At program initialisation time, after calling <a class="el" href="sky_8h.html#a185862b772bcb6ef6eebf5cb33de09a6" title="Initialise the site structure by calculating those site-related values that do not change with time.">sky_setSiteLocation()</a> (or <a class="el" href="sky_8h.html#a031a736d11ac57f7bf73cb8f68bb5aec" title="Alternative initialisation function to sky_setSiteLocation().">sky_setSiteLoc2()</a>)</li>
<li>If you have updated values of pressure or temperature</li>
</ol>
</dd></dl>
<hr  />
 <dl class="section examples"><dt>Examples</dt><dd><a class="el" href="demo1_sun_8c-example.html#a9">demo1_sun.c</a>, <a class="el" href="demo2_sun_tracking_8c-example.html#a9">demo2_sun_tracking.c</a>, <a class="el" href="demo3_moon_8c-example.html#a8">demo3_moon.c</a>, and <a class="el" href="demo4_multiple_sites_8c-example.html#a9">demo4_multiple_sites.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sky-site_8c_source.html#l00261">261</a> of file <a class="el" href="sky-site_8c_source.html">sky-site.c</a>.</p>

</div>
</div>
<a id="a982a0d853512a67d9e2177845e605dc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a982a0d853512a67d9e2177845e605dc4">&#9670;&nbsp;</a></span>sky_setSiteTimeZone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_setSiteTimeZone </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>timeZone_h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *&#160;</td>
          <td class="paramname"><em>site</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the time zone offset for this site. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeZone_h</td><td>Zonal correction (hours). Time zones east of Greenwich are positive (e.g. Australian Eastern Standard Time is +10.0) and those west of Greenwich are negative (e.g. US Pacific Daylight Time is -7.0)</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">site</td><td>field <em>timeZone_d</em>, time zone scaled to fractions of a day</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>When to call this function</dt><dd><ol type="1">
<li>At program initialisation time, after calling <a class="el" href="sky_8h.html#a185862b772bcb6ef6eebf5cb33de09a6" title="Initialise the site structure by calculating those site-related values that do not change with time.">sky_setSiteLocation()</a> (or <a class="el" href="sky_8h.html#a031a736d11ac57f7bf73cb8f68bb5aec" title="Alternative initialisation function to sky_setSiteLocation().">sky_setSiteLoc2()</a>)</li>
<li>If daylight saving begins or ends during the time the program is running</li>
</ol>
</dd></dl>
<hr  />
 <dl class="section examples"><dt>Examples</dt><dd><a class="el" href="demo1_sun_8c-example.html#a12">demo1_sun.c</a>, <a class="el" href="demo2_sun_tracking_8c-example.html#a12">demo2_sun_tracking.c</a>, <a class="el" href="demo3_moon_8c-example.html#a11">demo3_moon.c</a>, and <a class="el" href="demo4_multiple_sites_8c-example.html#a10">demo4_multiple_sites.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sky-site_8c_source.html#l00293">293</a> of file <a class="el" href="sky-site_8c_source.html">sky-site.c</a>.</p>

</div>
</div>
<a id="a9df313095294ca3e1fd6bfa9f53065b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9df313095294ca3e1fd6bfa9f53065b8">&#9670;&nbsp;</a></span>sky_setupSiteSurface()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_setupSiteSurface </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>azimuth_deg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>slope_deg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___site_horizon.html">Sky_SiteHorizon</a> *&#160;</td>
          <td class="paramname"><em>surface</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the orientation and slope of a surface (such as a solar panel) for which you want to calculate the incidence angle of incoming radiation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">azimuth_deg</td><td>The azimuth angle of the normal to the surface (degrees). This is measured clockwise from North, as for all other azimuth angles. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slope_deg</td><td>The slope of the surface measured from the horizontal (degrees). Alternatively, this is the zenith distance of the normal to the surface. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">surface</td><td>The coordinates of the normal to the surface, in both polar and rectangular forms. The rectangular form will be passed later to <a class="el" href="sky_8h.html#aa393888d1c0cb90591bba47452d99db4" title="Calculate the incidence angle of rays from the celestial object described by topoV (such as the sun) ...">sky_siteIncidence_rad()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>When to call this function</dt><dd>At program initialisation time only, if you have a surface of interest.</dd></dl>
<hr  />
 
<p class="definition">Definition at line <a class="el" href="sky-site_8c_source.html#l00317">317</a> of file <a class="el" href="sky-site_8c_source.html">sky-site.c</a>.</p>

</div>
</div>
<a id="a297ba340f931e59201a108c6a9e67800"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a297ba340f931e59201a108c6a9e67800">&#9670;&nbsp;</a></span>sky_adjustSiteForPolarMotion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_adjustSiteForPolarMotion </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_sky___polar_mot.html">Sky_PolarMot</a> *&#160;</td>
          <td class="paramname"><em>polar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *&#160;</td>
          <td class="paramname"><em>site</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modify our azEl rotation matrix to incorporate a polar motion rotation matrix. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">polar</td><td>Polar motion parameters, as set by function <a class="el" href="sky_8h.html#a670f5ac7522664ecdfc25c88d6cde7cf" title="Update polar motion correction.">sky_setPolarMotion()</a> </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">site</td><td>Fields <em>azElM</em> and possibly <em>azElPolM</em> are updated</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>When to call this function</dt><dd>Polar motion is such a tiny effect that you may well decide not to bother with it. So you only need to call this routine if:<ol type="1">
<li>you are bothering about polar motion at all, and</li>
<li>changes were made to the <em>polar</em> structure by a recent call to function <a class="el" href="sky_8h.html#a670f5ac7522664ecdfc25c88d6cde7cf" title="Update polar motion correction.">sky_setPolarMotion()</a>. This routine is only ever to be called after that routine has run. This is expected to be very infrequently - once per day is more than enough.</li>
</ol>
</dd></dl>
<hr  />
 
<p class="definition">Definition at line <a class="el" href="sky-site_8c_source.html#l00347">347</a> of file <a class="el" href="sky-site_8c_source.html">sky-site.c</a>.</p>

</div>
</div>
<a id="a0797b1e268ac7cc5b052c0623883eb74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0797b1e268ac7cc5b052c0623883eb74">&#9670;&nbsp;</a></span>sky_siteTirsToTopo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_siteTirsToTopo </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_v3_d___vector.html">V3D_Vector</a> *&#160;</td>
          <td class="paramname"><em>terInterV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dist_au</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *&#160;</td>
          <td class="paramname"><em>site</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___site_horizon.html">Sky_SiteHorizon</a> *&#160;</td>
          <td class="paramname"><em>topo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transform a coordinate vector from the Terrestrial Intermediate Reference System to topocentric Az/El coordinates for the observing site whose properties are described in parameter "site". </p>
<p>Note: there is a mixture of vectors in right-handed and left-handed coordinate systems here </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">terInterV</td><td>Position vector in Terrestrial Intermediate Reference System. (This will have been obtained by calling either routine astsite_appToTirs() or routine astsite_intermedToTopo().) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dist_au</td><td>Geocentric Distance to object (astronomical units). Note: for far distant objects outside of the solar system, you can supply 0.0 for this value. It will be treated as infinity. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">site</td><td>Block of data describing the observing site, as initialised by one of the functions <a class="el" href="sky_8h.html#a185862b772bcb6ef6eebf5cb33de09a6" title="Initialise the site structure by calculating those site-related values that do not change with time.">sky_setSiteLocation()</a> or <a class="el" href="sky_8h.html#a031a736d11ac57f7bf73cb8f68bb5aec" title="Alternative initialisation function to sky_setSiteLocation().">sky_setSiteLoc2()</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">topo</td><td>Topocentric position, both as a vector in horizon coordinates, and as azimuth (radian) and elevation (radian).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>When to call this function</dt><dd>When you have the position of a celestial object expressed in the Terrestrial Intermediate Reference System, use this function to convert it to topocentric coordinates (the coordinates as seen from a particular observing location on the Earth's surface). If you are running a control loop to enable continuous tracking of this object, you will need to call this function every time around your control loop. </dd></dl>
<dl class="section user"><dt></dt><dd>If you wish to calculate the position of the object as seen from multiple sites simultaneously, you need to call this function once for each of those sites, passing the relevant <em>site</em> data block to each call.</dd></dl>
<hr  />
 <dl class="section examples"><dt>Examples</dt><dd><a class="el" href="demo4_multiple_sites_8c-example.html#a20">demo4_multiple_sites.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sky-site_8c_source.html#l00378">378</a> of file <a class="el" href="sky-site_8c_source.html">sky-site.c</a>.</p>

</div>
</div>
<a id="a05846caf4fbc0dfe00c77cdb1faf6079"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05846caf4fbc0dfe00c77cdb1faf6079">&#9670;&nbsp;</a></span>sky_siteAzElToHaDec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sky_siteAzElToHaDec </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_v3_d___vector.html">V3D_Vector</a> *&#160;</td>
          <td class="paramname"><em>topoV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *&#160;</td>
          <td class="paramname"><em>site</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>hourAngle_rad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>declination_rad</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take a topocentric position vector in Azimuth/Elevation frame and use it to calculate the observed Hour Angle and Declination. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topoV</td><td>Topocentric position vector in Azimuth/Elevation frame (as returned by the <a class="el" href="sky_8h.html#a0797b1e268ac7cc5b052c0623883eb74" title="Transform a coordinate vector from the Terrestrial Intermediate Reference System to topocentric Az/El...">sky_siteTirsToTopo()</a> function) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">site</td><td>Field <em>haDecM</em> - rotation matrix to HA/Dec coordinates </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">hourAngle_rad</td><td>Hour angle (radian - note: not in hours) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">declination_rad</td><td>Declination (radian)</td></tr>
  </table>
  </dd>
</dl>
<p>The hour angle and declination returned by this function will be those of the refracted position of the object.</p>
<dl class="section user"><dt>When to call this function</dt><dd>After each call to <a class="el" href="sky_8h.html#a0797b1e268ac7cc5b052c0623883eb74" title="Transform a coordinate vector from the Terrestrial Intermediate Reference System to topocentric Az/El...">sky_siteTirsToTopo()</a>, but only if you want hour angle and declination.</dd></dl>
<hr  />
 
<p class="definition">Definition at line <a class="el" href="sky-site_8c_source.html#l00511">511</a> of file <a class="el" href="sky-site_8c_source.html">sky-site.c</a>.</p>

</div>
</div>
<a id="aa393888d1c0cb90591bba47452d99db4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa393888d1c0cb90591bba47452d99db4">&#9670;&nbsp;</a></span>sky_siteIncidence_rad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sky_siteIncidence_rad </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_v3_d___vector.html">V3D_Vector</a> *&#160;</td>
          <td class="paramname"><em>topoV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_v3_d___vector.html">V3D_Vector</a> *&#160;</td>
          <td class="paramname"><em>surfaceV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the incidence angle of rays from the celestial object described by <em>topoV</em> (such as the sun) falling onto a surface described by <em>surfaceV</em> (such as a solar panel). </p>
<dl class="section return"><dt>Returns</dt><dd>Incidence angle of the radiation (radian) </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topoV</td><td>Unit vector pointing to the celestial object, as returned by the <a class="el" href="sky_8h.html#a0797b1e268ac7cc5b052c0623883eb74" title="Transform a coordinate vector from the Terrestrial Intermediate Reference System to topocentric Az/El...">sky_siteTirsToTopo()</a> routine (in the <em>topo-&gt;rectV</em> field). Must be of unity magnitude, otherwise an assertion failure occurs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">surfaceV</td><td>Unit vector of normal to the surface, as returned by routine <a class="el" href="sky_8h.html#a9df313095294ca3e1fd6bfa9f53065b8" title="Set the orientation and slope of a surface (such as a solar panel) for which you want to calculate th...">sky_setupSiteSurface()</a> (in the <em>surface-&gt;rectV</em> field). Must be of unity magnitude, otherwise an assertion failure occurs.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>When to call this function</dt><dd>After each call to <a class="el" href="sky_8h.html#a0797b1e268ac7cc5b052c0623883eb74" title="Transform a coordinate vector from the Terrestrial Intermediate Reference System to topocentric Az/El...">sky_siteTirsToTopo()</a>, but only if you have a surface that you want the incidence angle for.</dd></dl>
<hr  />
 
<p class="definition">Definition at line <a class="el" href="sky-site_8c_source.html#l00547">547</a> of file <a class="el" href="sky-site_8c_source.html">sky-site.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="sky_8h.html">sky.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
