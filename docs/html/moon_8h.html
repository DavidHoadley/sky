<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sun position: moon.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sun position
   &#160;<span id="projectnumber">0.1.5-1</span>
   </div>
   <div id="projectbrief">Sun position algorithm</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('moon_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">moon.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="moon_8h.html" title="moon.h - routines to calculate the Moon&#39;s position">moon.h</a> - routines to calculate the Moon's position  
<a href="#details">More...</a></p>

<p><a href="moon_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9b267f69e671ecb03fe804c51cb8f214"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="moon_8h.html#a9b267f69e671ecb03fe804c51cb8f214">moon_nrelApp2</a> (double t_cy, const <a class="el" href="struct_sky0___nut1980.html">Sky0_Nut1980</a> *nut, <a class="el" href="struct_v3_d___vector.html">V3D_Vector</a> *appV, double *dist_au)</td></tr>
<tr class="memdesc:a9b267f69e671ecb03fe804c51cb8f214"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the Moon's position in geocentric apparent coordinates, using the NREL Moon Position Algorithm.  <a href="moon_8h.html#a9b267f69e671ecb03fe804c51cb8f214">More...</a><br /></td></tr>
<tr class="separator:a9b267f69e671ecb03fe804c51cb8f214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae26dfd26ce7ba3a93eaa9ac24982016d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="moon_8h.html#ae26dfd26ce7ba3a93eaa9ac24982016d">moon_nrelApparent</a> (double j2kTT_cy, <a class="el" href="struct_sky___true_equatorial.html">Sky_TrueEquatorial</a> *pos)</td></tr>
<tr class="memdesc:ae26dfd26ce7ba3a93eaa9ac24982016d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the Moon's position as a unit vector and a distance, in apparent coordinates.  <a href="moon_8h.html#ae26dfd26ce7ba3a93eaa9ac24982016d">More...</a><br /></td></tr>
<tr class="separator:ae26dfd26ce7ba3a93eaa9ac24982016d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f0db3b9becd20ad7efe437f6e999394"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="moon_8h.html#a3f0db3b9becd20ad7efe437f6e999394">moon_nrelTopocentric</a> (double j2kdUtc, const <a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a> *deltas, const <a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *site, <a class="el" href="struct_sky___site_horizon.html">Sky_SiteHorizon</a> *topo)</td></tr>
<tr class="memdesc:a3f0db3b9becd20ad7efe437f6e999394"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls <a class="el" href="moon_8h.html#ae26dfd26ce7ba3a93eaa9ac24982016d" title="Calculate the Moon&#39;s position as a unit vector and a distance, in apparent coordinates.">moon_nrelApparent()</a> to calculate the Moon's position in apparent coordinates using the NREL Moon Position Algorithm, and then converts this to topocentric horizon coordinates at the specified site.  <a href="moon_8h.html#a3f0db3b9becd20ad7efe437f6e999394">More...</a><br /></td></tr>
<tr class="separator:a3f0db3b9becd20ad7efe437f6e999394"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f11644142c66b3c46fbd792ff279d6f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="moon_8h.html#a1f11644142c66b3c46fbd792ff279d6f">moon_riseSet</a> (int year, int month, int day, bool getMoonrise, const <a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a> *deltas, const <a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *site, <a class="el" href="struct_sky___site_horizon.html">Sky_SiteHorizon</a> *topo)</td></tr>
<tr class="memdesc:a1f11644142c66b3c46fbd792ff279d6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to calculate the time of moonrise or moonset for the day specified by <em>year</em>, <em>month</em> and <em>day</em>.  <a href="moon_8h.html#a1f11644142c66b3c46fbd792ff279d6f">More...</a><br /></td></tr>
<tr class="separator:a1f11644142c66b3c46fbd792ff279d6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="moon_8h.html" title="moon.h - routines to calculate the Moon&#39;s position">moon.h</a> - routines to calculate the Moon's position </p>
<dl class="section author"><dt>Author</dt><dd>David Hoadley</dd></dl>
<p>An implementation of the SAMPA (Moon Position Algorithm) from the National Renewable Energy Laboratory</p>
<p>Rectangular coordinates are used wherever possible, to minimise the unnecessary recalculation of trigonometric functions. </p><dl class="section user"><dt>Reference:</dt><dd>Reda, I., <em>Solar Eclipse Monitoring for Solar Energy Applications Using the Solar and Moon Position Algorithms</em>. National Renewable Energy Laboratory Technical Report NREL/TP-3B0-47681, March 2010</dd></dl>
<hr  />
 
<p class="definition">Definition in file <a class="el" href="moon_8h_source.html">moon.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a9b267f69e671ecb03fe804c51cb8f214"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b267f69e671ecb03fe804c51cb8f214">&#9670;&nbsp;</a></span>moon_nrelApp2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moon_nrelApp2 </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>t_cy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_sky0___nut1980.html">Sky0_Nut1980</a> *&#160;</td>
          <td class="paramname"><em>nut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_v3_d___vector.html">V3D_Vector</a> *&#160;</td>
          <td class="paramname"><em>appV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>dist_au</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the Moon's position in geocentric apparent coordinates, using the NREL Moon Position Algorithm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">t_cy</td><td>Julian centuries since J2000.0, TT timescale </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nut</td><td>Nutation terms and obliquity of the ecliptic </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">appV</td><td>Position vector of Moon in apparent coordinates (unit vector i.e. direction cosines) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dist_au</td><td>Geocentric distance of the Moon (Astronomical Units)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Reference</dt><dd>Reda, I., "Solar Eclipse Monitoring for Solar Energy Applications Using the
    Solar and Moon Position Algorithms". National Renewable Energy Laboratory Technical Report NREL/TP-3B0-47681, March 2010</dd></dl>
<hr  />
 
<p class="definition">Definition at line <a class="el" href="moon_8c_source.html#l00143">143</a> of file <a class="el" href="moon_8c_source.html">moon.c</a>.</p>

</div>
</div>
<a id="ae26dfd26ce7ba3a93eaa9ac24982016d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae26dfd26ce7ba3a93eaa9ac24982016d">&#9670;&nbsp;</a></span>moon_nrelApparent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moon_nrelApparent </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>j2kTT_cy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___true_equatorial.html">Sky_TrueEquatorial</a> *&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the Moon's position as a unit vector and a distance, in apparent coordinates. </p>
<p>It calls <a class="el" href="moon_8h.html#a9b267f69e671ecb03fe804c51cb8f214" title="Calculates the Moon&#39;s position in geocentric apparent coordinates, using the NREL Moon Position Algor...">moon_nrelApp2()</a> to obtain the Moon's position, after having called <a class="el" href="sky0_8h.html#a7a264cd6849a45a5edc1c660c8b76aa6" title="Calculates the nutation in longitude and obliquity, according to the algorithm set out in the NREL SP...">sky0_nutationSpa()</a> to obtain the necessary nutation terms. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">j2kTT_cy</td><td>Julian centuries since J2000.0, TT timescale </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pos</td><td>Timestamped structure containing position data and the equation of the equinoxes</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>When to call this function</dt><dd>Because this function is computationally intensive, you may wish to limit your use of this function.<ul>
<li>if you want the Moon's position at multiple sites simultaneously at a single time, call this function, then follow it with a call to routine <a class="el" href="sky0_8h.html#a420b9af8dd92d7151d5ccc253c417954" title="Convert a position in geocentric apparent coordinates to geocentric coordinates in the Terrestrial In...">sky0_appToTirs()</a>, and then make a separate call to <a class="el" href="sky_8h.html#a0797b1e268ac7cc5b052c0623883eb74" title="Transform a coordinate vector from the Terrestrial Intermediate Reference System to topocentric Az/El...">sky_siteTirsToTopo()</a> for each of one those sites.</li>
<li>if you want the Moon's position at one or more sites at closely spaced times (e.g. for tracking the Moon), pass this function to the <a class="el" href="skyfast_8h.html#ac22205943c218e19d4313fc71dda43d4" title="Initialise those items that take a long time to calculate, but which do not need to be recalculated f...">skyfast_init()</a> function. <a class="el" href="skyfast_8h.html#ac22205943c218e19d4313fc71dda43d4" title="Initialise those items that take a long time to calculate, but which do not need to be recalculated f...">skyfast_init()</a> will call it for you several times, to fully calculate positions that will be saved and used later for interpolation by the <a class="el" href="skyfast_8h.html#afb9144e153624a3bf899af40eca07ac0" title="Get the best approximation to the celestial object&#39;s apparent coordinates and distance,...">skyfast_getApprox()</a> function for tracking. </li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd><em>Alternatives:</em> <ul>
<li>If you want the Moon's position at a single site only at a single time, call <a class="el" href="moon_8h.html#a3f0db3b9becd20ad7efe437f6e999394" title="Calls moon_nrelApparent() to calculate the Moon&#39;s position in apparent coordinates using the NREL Moo...">moon_nrelTopocentric()</a> instead, and it will call this function for you.</li>
<li>If you want the Moon's position at a single site for more than one time but the times are spaced more than an hour or so apart, once again call <a class="el" href="moon_8h.html#a3f0db3b9becd20ad7efe437f6e999394" title="Calls moon_nrelApparent() to calculate the Moon&#39;s position in apparent coordinates using the NREL Moo...">moon_nrelTopocentric()</a> instead.</li>
<li>If you want to track the Moon, call <a class="el" href="skyfast_8h.html#afb9144e153624a3bf899af40eca07ac0" title="Get the best approximation to the celestial object&#39;s apparent coordinates and distance,...">skyfast_getApprox()</a> instead. But this requires you to set up interpolation first with function <a class="el" href="skyfast_8h.html#ac22205943c218e19d4313fc71dda43d4" title="Initialise those items that take a long time to calculate, but which do not need to be recalculated f...">skyfast_init()</a> (and this function), as described above.</li>
</ul>
</dd></dl>
<hr  />
 
<p class="definition">Definition at line <a class="el" href="moon_8c_source.html#l00242">242</a> of file <a class="el" href="moon_8c_source.html">moon.c</a>.</p>

</div>
</div>
<a id="a3f0db3b9becd20ad7efe437f6e999394"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f0db3b9becd20ad7efe437f6e999394">&#9670;&nbsp;</a></span>moon_nrelTopocentric()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moon_nrelTopocentric </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>j2kdUtc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a> *&#160;</td>
          <td class="paramname"><em>deltas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *&#160;</td>
          <td class="paramname"><em>site</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___site_horizon.html">Sky_SiteHorizon</a> *&#160;</td>
          <td class="paramname"><em>topo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls <a class="el" href="moon_8h.html#ae26dfd26ce7ba3a93eaa9ac24982016d" title="Calculate the Moon&#39;s position as a unit vector and a distance, in apparent coordinates.">moon_nrelApparent()</a> to calculate the Moon's position in apparent coordinates using the NREL Moon Position Algorithm, and then converts this to topocentric horizon coordinates at the specified site. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">j2kdUtc</td><td>UTC time in "J2KD" form - i.e days since J2000.0 (= JD - 2 451 545.0) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">deltas</td><td>Delta T values, as set by the <a class="el" href="sky_8h.html#abf770ba7cb996e73f59f41f24b172e3a" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTime()</a> (or <a class="el" href="sky_8h.html#a15ad9a782e54212cb22bd0658b6541a0" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeSimple()</a> or <a class="el" href="sky_8h.html#a4295dc6df66f02c4def3160782a06902" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeDetailed()</a>) routines </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">site</td><td>Properties of the observing site, particularly its geometric location on the surface of the Earth, as set by the <a class="el" href="sky_8h.html#a185862b772bcb6ef6eebf5cb33de09a6" title="Initialise the site structure by calculating those site-related values that do not change with time.">sky_setSiteLocation()</a> function (or <a class="el" href="sky_8h.html#a031a736d11ac57f7bf73cb8f68bb5aec" title="Alternative initialisation function to sky_setSiteLocation().">sky_setSiteLoc2()</a>) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">topo</td><td>Topocentric position, in both rectangular (unit vector) form, and as Azimuth and Elevation (altitude) angles</td></tr>
  </table>
  </dd>
</dl>
<hr  />
 <dl class="section examples"><dt>Examples</dt><dd><a class="el" href="demo3_moon_8c-example.html#a14">demo3_moon.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="moon_8c_source.html#l00297">297</a> of file <a class="el" href="moon_8c_source.html">moon.c</a>.</p>

</div>
</div>
<a id="a1f11644142c66b3c46fbd792ff279d6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f11644142c66b3c46fbd792ff279d6f">&#9670;&nbsp;</a></span>moon_riseSet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double moon_riseSet </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>year</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>month</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>day</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>getMoonrise</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_sky___delta_ts.html">Sky_DeltaTs</a> *&#160;</td>
          <td class="paramname"><em>deltas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_sky___site_prop.html">Sky_SiteProp</a> *&#160;</td>
          <td class="paramname"><em>site</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_sky___site_horizon.html">Sky_SiteHorizon</a> *&#160;</td>
          <td class="paramname"><em>topo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routine to calculate the time of moonrise or moonset for the day specified by <em>year</em>, <em>month</em> and <em>day</em>. </p>
<p>This function uses the NREL MPA algorithm of <a class="el" href="moon_8h.html#a3f0db3b9becd20ad7efe437f6e999394" title="Calls moon_nrelApparent() to calculate the Moon&#39;s position in apparent coordinates using the NREL Moo...">moon_nrelTopocentric()</a> to calculate the Moon's position. </p><dl class="section return"><dt>Returns</dt><dd>Moonrise (or moonset) time for the day given in <em>year</em>, <em>month</em> and <em>day</em> (returned as a J2KD date (= JD - 2 451 545.0), UTC timescale). To view this as a local date and time, add this value to <em>site-&gt;timezone_d</em> and pass the result to function <a class="el" href="sky_8h.html#a6afa64839aaee5925d90c013e8eaa0b2" title="This procedure converts the integral part of the date in &quot;J2KD&quot; form to a calendar date and the fract...">sky_j2kdToCalTime()</a>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">year,month,day</td><td>Date for which moonrise or moonset time is desired </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">getMoonrise</td><td>If true, get moonrise time. If false, get moonset time </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">deltas</td><td>Delta T values, as set by the <a class="el" href="sky_8h.html#abf770ba7cb996e73f59f41f24b172e3a" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTime()</a> (or <a class="el" href="sky_8h.html#a15ad9a782e54212cb22bd0658b6541a0" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeSimple()</a> or <a class="el" href="sky_8h.html#a4295dc6df66f02c4def3160782a06902" title="This is one of three alternative routines for setting up the various delta time values for use in ong...">sky_initTimeDetailed()</a>) routines </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">site</td><td>Properties of the observing site, particularly its geometric location on the surface of the Earth and its time zone, as set by the <a class="el" href="sky_8h.html#a185862b772bcb6ef6eebf5cb33de09a6" title="Initialise the site structure by calculating those site-related values that do not change with time.">sky_setSiteLocation()</a> function (or <a class="el" href="sky_8h.html#a031a736d11ac57f7bf73cb8f68bb5aec" title="Alternative initialisation function to sky_setSiteLocation().">sky_setSiteLoc2()</a>) and <a class="el" href="sky_8h.html#a982a0d853512a67d9e2177845e605dc4" title="Set the time zone offset for this site.">sky_setSiteTimeZone()</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">topo</td><td><b>Optional</b>. Topocentric position of the Moon at rise or set, in both rectangular (unit vector) form, and as Azimuth and Elevation (altitude) angles. If you are not interested in these values, you can pass NULL to this parameter.</td></tr>
  </table>
  </dd>
</dl>
<p>This routine uses an iterative approach. Three iterations seems to be enough.</p>
<dl class="section note"><dt>Note</dt><dd>If the Moon does not rise (or set) on the specified day, this routine will return the time just before midnight on the previous day, or just after midnight on the next day, when the rise (or set) actually occurs. If the routine encounters an error, it will return 0.0</dd></dl>
<hr  />
 
<p class="definition">Definition at line <a class="el" href="moon_8c_source.html#l00335">335</a> of file <a class="el" href="moon_8c_source.html">moon.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="moon_8h.html">moon.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
